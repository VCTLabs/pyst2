<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyst2: A Python Interface to Asterisk &mdash; pyst2 0.5.2.dev17 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="asterisk" href="api/modules.html" />
    <link rel="prev" title="Welcome to the pyst2 documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pyst2
          </a>
              <div class="version">
                0.5.2.dev17
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">pyst2: A Python Interface to Asterisk</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#project-documentation">Project Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meta">Meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fastagi">FastAGI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#credits">Credits</a></li>
<li class="toctree-l2"><a class="reference internal" href="#things-to-do-for-pyst">Things to do for pyst</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">asterisk</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyst2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">pyst2: A Python Interface to Asterisk</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pyst2-a-python-interface-to-asterisk">
<h1>pyst2: A Python Interface to Asterisk<a class="headerlink" href="#pyst2-a-python-interface-to-asterisk" title="Permalink to this heading"></a></h1>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/pyst2"><img alt="pyst2 Release" src="https://img.shields.io/pypi/v/pyst2.svg" /></a>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/pyst2"><img alt="pyst2 Downloads" src="https://img.shields.io/pypi/dm/pyst2.svg" /></a>
<a class="reference external image-reference" href="https://travis-ci.org/rdegges/pyst2"><img alt="pyst2 Build" src="https://img.shields.io/travis/rdegges/pyst2.svg" /></a>
<img alt="Snake Sketch" src="https://github.com/rdegges/pyst2/raw/master/assets/snake-sketch.jpg" />
<section id="project-documentation">
<h2>Project Documentation<a class="headerlink" href="#project-documentation" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="http://pyst2.readthedocs.io">http://pyst2.readthedocs.io</a></p>
</section>
<section id="meta">
<h2>Meta<a class="headerlink" href="#meta" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Author: Randall Degges</p></li>
<li><p>Email: <a class="reference external" href="mailto:r&#37;&#52;&#48;rdegges&#46;com">r<span>&#64;</span>rdegges<span>&#46;</span>com</a></p></li>
<li><p>Site: <a class="reference external" href="http://www.rdegges.com">http://www.rdegges.com</a></p></li>
<li><p>Status: <em>looking for maintainer</em>, active</p></li>
</ul>
<p><strong>NOTE</strong>: This project is now mantained by Francesco Rana.
Please be patient because I’m not used to the job yet, but I’ll do my
best. Many and infinite thanks to Randall Degges for his wonderful
work. I’m actually using the library in some project of mine, so I’m
more than happy to help and push it further if I can. I’m happy to
accept pull requests and cut releases as needed. If you want to
contribute to the project, please do!</p>
</section>
<section id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this heading"></a></h2>
<p>pyst2 consists of a set of interfaces and libraries to allow
programming of Asterisk from python. The library currently supports
AGI, AMI, and the parsing of Asterisk configuration files. The library
also includes debugging facilities for AGI.</p>
<p>This project has been forked from pyst (<a class="reference external" href="http://sf.net/projects/pyst/">http://sf.net/projects/pyst/</a>)
because it was impossible for me to contact the project maintainer
(after several attempts), and I’d like to bring the project up-to-date,
fix bugs, and make it more usable overall.</p>
<p>My immediate plans include adding full documentation, re-writing some
of the core routines, adding a test suite, and accepting pull requests.</p>
<p>If you are one of the current maintainers, and would like to take over
the fork, please contact me: <a class="reference external" href="mailto:r&#37;&#52;&#48;rdegges&#46;com">r<span>&#64;</span>rdegges<span>&#46;</span>com</a>, so we can get that setup!</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<p>To install <code class="docutils literal notranslate"><span class="pre">pyst2</span></code>, simply run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install pyst2
</pre></div>
</div>
<p>This will install the latest version of the library automatically.</p>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading"></a></h2>
<p>Documentation is currently only in python docstrings, you can use
pythons built-in help facility:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asterisk</span>
<span class="n">help</span> <span class="p">(</span><span class="n">asterisk</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">asterisk.agi</span>
<span class="n">help</span> <span class="p">(</span><span class="n">asterisk</span><span class="o">.</span><span class="n">agi</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">asterisk.manager</span>
<span class="n">help</span> <span class="p">(</span><span class="n">asterisk</span><span class="o">.</span><span class="n">manager</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">asterisk.config</span>
<span class="n">help</span> <span class="p">(</span><span class="n">asterisk</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>Some notes on platforms: We now specify “platforms = ‘Any’” in
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code>. This means, the manager part of the package will probably
run on any platform. The agi scripts on the other hand are called
directly on the host where Asterisk is running. Since Asterisk doesn’t
run on windows platforms (and probably never will) the agi part of the
package can only be run on Asterisk platforms.</p>
</section>
<section id="fastagi">
<h2>FastAGI<a class="headerlink" href="#fastagi" title="Permalink to this heading"></a></h2>
<p>FastAGI support is a python based raw SocketServer, To start the server
python fastagi.py should start it listening on localhost and the default
asterisk FastAGI port. This does require the newest version of pyst2.
The FastAGI server runs in as a Forked operation for each request, in
an attempt to prevent blocking by a single bad service. As a result the
FastAGI server may consume more memory then a single process. If you need
to use a single process simply uncomment the appropriate line. Future versions
of this will use a config file to set options.</p>
</section>
<section id="credits">
<h2>Credits<a class="headerlink" href="#credits" title="Permalink to this heading"></a></h2>
<p>Thanks to Karl Putland for writing the original package.</p>
<p>Thanks to Matthew Nicholson for maintaining the package for some years
and for handing over maintenance when he was no longer interested.</p>
<p>Thanks to Randall Degges for maintaining this for and accepting
pull requests.</p>
</section>
<section id="things-to-do-for-pyst">
<h2>Things to do for pyst<a class="headerlink" href="#things-to-do-for-pyst" title="Permalink to this heading"></a></h2>
<p>This is the original changelog merged into the readme file. I’m not so
sure I really want to change all these things (in particular the
threaded implementation looks good to me). I will maintain a section
summarizing the changes in this README. Detailed changes will be
available in the version control tool (currently git).</p>
<ul>
<li><p>ChangeLog:
The ChangeLog needs to be updated from the monotone logs.</p></li>
<li><p>Documentation:
All of pyst’s inline documentation needs to be updated.</p></li>
<li><p>manager.py:
This should be converted to be single threaded.  Also there is a race
condition when a user calls manager.logoff() followed by
manager.close().  The close() function may still call logoff again if
the socket thread has not yet cleared the _connected flag.</p>
<p>A class should be made for each manager action rather than having a
function in a manager class.  The manager class should be adapted to
have a send method that know the general format of the classes.</p>
</li>
</ul>
<p>Matthew Nicholson writes on the mailinglist (note that I’m not sure I’ll do
this, I’m currently satisfied with the threaded implementation):</p>
<blockquote>
<div><p>For pyst 0.3 I am planning to clean up the manager.py.  There are
several know issues with the code.  No one has actually reported these
as problems, but I have personally had trouble with these.  Currently
manager.py runs in several threads, the main program thread, a thread to
read from the network, and an event distribution thread.  This causes
problems with non thread safe code such as the MySQLdb libraries.  This
design also causes problems when an event handler throws an exception
that causes the event processing thread to terminate.</p>
<p>The second problem is with the way actions are sent.  Each action has a
specific function associated with it in the manager object that takes
all possible arguments that may ever be passed to that action.  This
makes the api somewhat rigid and the Manager object cluttered.</p>
<p>To solve these problems I am basically going to copy the design of my
Astxx manager library (written in c++) and make it more python like.
Each action will be a different object with certain methods to handle
various tasks, with one function in the actual Manager class to send the
action.  This will make the Manager class much smaller and much more
flexible.  The current code will be consolidated into a single threaded
design with hooks to have the library process events and such.  These
hooks will be called from the host application’s main loop.</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to the pyst2 documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api/modules.html" class="btn btn-neutral float-right" title="asterisk" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>